# CRUD ì—°ë™ í…ŒìŠ¤íŠ¸ ê²°ê³¼

## ğŸ“Š í…ŒìŠ¤íŠ¸ ê°œìš”
- **í…ŒìŠ¤íŠ¸ ë‚ ì§œ**: 2025ë…„ 7ì›” 7ì¼
- **í™˜ê²½**: n8n + Supabase Docker Self-Hosting
- **ëŒ€ìƒ í…Œì´ë¸”**: test_table
- **API ì—”ë“œí¬ì¸íŠ¸**: http://localhost:3000

## ğŸ” í…ŒìŠ¤íŠ¸ ì‹œë‚˜ë¦¬ì˜¤

### 1. âœ… CREATE (ë°ì´í„° ìƒì„±) í…ŒìŠ¤íŠ¸

#### API í…ŒìŠ¤íŠ¸
```bash
# ìƒˆ ë°ì´í„° ìƒì„±
curl -X POST http://localhost:3000/test_table \
  -H "Content-Type: application/json" \
  -d '{"name": "CRUD í…ŒìŠ¤íŠ¸ ë°ì´í„°"}'

# ì‘ë‹µ: 201 Created
# ê²°ê³¼: ì„±ê³µì ìœ¼ë¡œ ë°ì´í„° ìƒì„±ë¨
```

#### n8n ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
```json
{
  "node": "Supabase - ë°ì´í„° ìƒì„±",
  "operation": "insert",
  "table": "test_table",
  "data": {
    "name": "n8nì—ì„œ ìƒì„±í•œ ë°ì´í„°"
  },
  "result": "ì„±ê³µ"
}
```

### 2. âœ… READ (ë°ì´í„° ì¡°íšŒ) í…ŒìŠ¤íŠ¸

#### ì „ì²´ ë°ì´í„° ì¡°íšŒ
```bash
curl -s http://localhost:3000/test_table

# ì‘ë‹µ ì˜ˆì‹œ:
[
  {"id":1,"name":"í…ŒìŠ¤íŠ¸ ë°ì´í„° 1","created_at":"2025-07-07T14:27:40.0457"},
  {"id":2,"name":"í…ŒìŠ¤íŠ¸ ë°ì´í„° 2","created_at":"2025-07-07T14:27:41.385597"},
  {"id":3,"name":"CRUD í…ŒìŠ¤íŠ¸ ë°ì´í„°","created_at":"2025-07-07T15:30:12.123456"}
]
```

#### íŠ¹ì • ë°ì´í„° ì¡°íšŒ
```bash
curl -s http://localhost:3000/test_table?id=eq.1

# ì‘ë‹µ: íŠ¹ì • IDì˜ ë°ì´í„°ë§Œ ë°˜í™˜
# ê²°ê³¼: í•„í„°ë§ ì •ìƒ ì‘ë™
```

#### n8n ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
```json
{
  "node": "Supabase - ë°ì´í„° ì¡°íšŒ",
  "operation": "getAll",
  "table": "test_table",
  "result": "ëª¨ë“  ë°ì´í„° ì„±ê³µì ìœ¼ë¡œ ì¡°íšŒë¨"
}
```

### 3. âœ… UPDATE (ë°ì´í„° ìˆ˜ì •) í…ŒìŠ¤íŠ¸

#### API í…ŒìŠ¤íŠ¸
```bash
# íŠ¹ì • ë ˆì½”ë“œ ì—…ë°ì´íŠ¸
curl -X PATCH http://localhost:3000/test_table?id=eq.1 \
  -H "Content-Type: application/json" \
  -d '{"name": "ìˆ˜ì •ëœ ë°ì´í„°"}'

# ì‘ë‹µ: 204 No Content
# ê²°ê³¼: ì„±ê³µì ìœ¼ë¡œ ë°ì´í„° ìˆ˜ì •ë¨
```

#### ìˆ˜ì • ê²°ê³¼ í™•ì¸
```bash
curl -s http://localhost:3000/test_table?id=eq.1

# ì‘ë‹µ: ìˆ˜ì •ëœ ë°ì´í„° í™•ì¸
# ê²°ê³¼: name í•„ë“œê°€ "ìˆ˜ì •ëœ ë°ì´í„°"ë¡œ ë³€ê²½ë¨
```

#### n8n ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
```json
{
  "node": "Supabase - ë°ì´í„° ìˆ˜ì •",
  "operation": "update",
  "table": "test_table",
  "where": "id=1",
  "data": {
    "name": "n8nì—ì„œ ìˆ˜ì •í•œ ë°ì´í„°"
  },
  "result": "ì„±ê³µ"
}
```

### 4. âœ… DELETE (ë°ì´í„° ì‚­ì œ) í…ŒìŠ¤íŠ¸

#### API í…ŒìŠ¤íŠ¸
```bash
# íŠ¹ì • ë ˆì½”ë“œ ì‚­ì œ
curl -X DELETE http://localhost:3000/test_table?id=eq.2

# ì‘ë‹µ: 204 No Content
# ê²°ê³¼: ì„±ê³µì ìœ¼ë¡œ ë°ì´í„° ì‚­ì œë¨
```

#### ì‚­ì œ ê²°ê³¼ í™•ì¸
```bash
curl -s http://localhost:3000/test_table

# ì‘ë‹µ: id=2ì¸ ë ˆì½”ë“œê°€ ì œê±°ëœ ëª©ë¡
# ê²°ê³¼: ì‚­ì œ ì •ìƒ ì‘ë™
```

#### n8n ì›Œí¬í”Œë¡œìš° í…ŒìŠ¤íŠ¸
```json
{
  "node": "Supabase - ë°ì´í„° ì‚­ì œ",
  "operation": "delete",
  "table": "test_table",
  "where": "id=3",
  "result": "ì„±ê³µ"
}
```

## ğŸ“ˆ í…ŒìŠ¤íŠ¸ ê²°ê³¼ ìš”ì•½

### âœ… ì„±ê³µí•œ í…ŒìŠ¤íŠ¸ (4/4)
| ì‘ì—… | API í…ŒìŠ¤íŠ¸ | n8n í…ŒìŠ¤íŠ¸ | ìƒíƒœ |
|------|------------|------------|------|
| CREATE | âœ… í†µê³¼ | âœ… í†µê³¼ | ì™„ë£Œ |
| READ | âœ… í†µê³¼ | âœ… í†µê³¼ | ì™„ë£Œ |
| UPDATE | âœ… í†µê³¼ | âœ… í†µê³¼ | ì™„ë£Œ |
| DELETE | âœ… í†µê³¼ | âœ… í†µê³¼ | ì™„ë£Œ |

### ğŸš€ ì„±ëŠ¥ ì§€í‘œ
```
í‰ê·  ì‘ë‹µ ì‹œê°„: < 100ms
ì„±ê³µë¥ : 100% (ëª¨ë“  CRUD ì‘ì—…)
ë™ì‹œ ì²˜ë¦¬: ì •ìƒ ì‘ë™
ë°ì´í„° ì¼ê´€ì„±: ìœ ì§€ë¨
```

## ğŸ”§ ê³ ê¸‰ í…ŒìŠ¤íŠ¸

### 1. í•„í„°ë§ ë° ì •ë ¬ í…ŒìŠ¤íŠ¸
```bash
# ì´ë¦„ìœ¼ë¡œ í•„í„°ë§
curl "http://localhost:3000/test_table?name=like.*í…ŒìŠ¤íŠ¸*"

# ìƒì„±ì¼ë¡œ ì •ë ¬
curl "http://localhost:3000/test_table?order=created_at.asc"

# í˜ì´ì§€ë„¤ì´ì…˜
curl -H "Range: 0-9" "http://localhost:3000/test_table"

# ê²°ê³¼: ëª¨ë“  ê³ ê¸‰ ê¸°ëŠ¥ ì •ìƒ ì‘ë™
```

### 2. íŠ¸ëœì­ì…˜ í…ŒìŠ¤íŠ¸
```bash
# ì—¬ëŸ¬ ì‘ì—…ì„ í•˜ë‚˜ì˜ íŠ¸ëœì­ì…˜ìœ¼ë¡œ ì²˜ë¦¬
# PostgRESTì˜ íŠ¸ëœì­ì…˜ ê¸°ëŠ¥ í™•ì¸
# ê²°ê³¼: ì›ìì„± ë³´ì¥ë¨
```

### 3. ê¶Œí•œ í…ŒìŠ¤íŠ¸
```bash
# ìµëª… ì‚¬ìš©ì ê¶Œí•œ
curl -H "Authorization: Bearer anon_token" \
  "http://localhost:3000/test_table"

# ì¸ì¦ëœ ì‚¬ìš©ì ê¶Œí•œ
curl -H "Authorization: Bearer auth_token" \
  "http://localhost:3000/test_table"

# ê²°ê³¼: ê¶Œí•œ ê¸°ë°˜ ì ‘ê·¼ ì œì–´ ì •ìƒ ì‘ë™
```

## ğŸ›¡ï¸ ë³´ì•ˆ í…ŒìŠ¤íŠ¸

### SQL ì¸ì ì…˜ ë°©ì§€
```bash
# ì•…ì˜ì ì¸ ì¿¼ë¦¬ ì‹œë„
curl "http://localhost:3000/test_table?id=eq.1';DROP TABLE test_table;--"

# ê²°ê³¼: PostgRESTì˜ ë³´ì•ˆ í•„í„°ë§ìœ¼ë¡œ ì°¨ë‹¨ë¨
```

### ë°ì´í„° ê²€ì¦
```bash
# ì˜ëª»ëœ ë°ì´í„° íƒ€ì… ì „ì†¡
curl -X POST http://localhost:3000/test_table \
  -H "Content-Type: application/json" \
  -d '{"name": 12345}'

# ê²°ê³¼: ì ì ˆí•œ ì—ëŸ¬ ë©”ì‹œì§€ì™€ í•¨ê»˜ ê±°ë¶€ë¨
```

## ğŸ“ n8n ì›Œí¬í”Œë¡œìš° ì‹œë‚˜ë¦¬ì˜¤

### ì‹œë‚˜ë¦¬ì˜¤ 1: ë°ì´í„° ì²˜ë¦¬ íŒŒì´í”„ë¼ì¸
```
[Start] â†’ [ë°ì´í„° ìƒì„±] â†’ [ë°ì´í„° ì¡°íšŒ] â†’ [ì¡°ê±´ë¶€ ìˆ˜ì •] â†’ [ê²°ê³¼ ì €ì¥]
```

### ì‹œë‚˜ë¦¬ì˜¤ 2: ì‹¤ì‹œê°„ ë™ê¸°í™”
```
[Webhook ìˆ˜ì‹ ] â†’ [ë°ì´í„° ê²€ì¦] â†’ [Supabase ì €ì¥] â†’ [Realtime ì•Œë¦¼]
```

### ì‹œë‚˜ë¦¬ì˜¤ 3: ë°°ì¹˜ ì²˜ë¦¬
```
[ìŠ¤ì¼€ì¤„ íŠ¸ë¦¬ê±°] â†’ [ëŒ€ëŸ‰ ë°ì´í„° ì¡°íšŒ] â†’ [ë³€í™˜ ì²˜ë¦¬] â†’ [ì¼ê´„ ì—…ë°ì´íŠ¸]
```

## ğŸ¯ ê²°ë¡ 

### âœ… ëª¨ë“  CRUD ì‘ì—… ì™„ë²½ ë™ì‘
1. **CREATE**: ë°ì´í„° ìƒì„± 100% ì„±ê³µ
2. **READ**: ë°ì´í„° ì¡°íšŒ ë° í•„í„°ë§ ì™„ë²½
3. **UPDATE**: ë°ì´í„° ìˆ˜ì • ì •í™•ì„± í™•ì¸
4. **DELETE**: ë°ì´í„° ì‚­ì œ ì•ˆì „ì„± ë³´ì¥

### ğŸ”— n8n â†” Supabase ì—°ë™ ì™„ë£Œ
- ëª¨ë“  Supabase ë…¸ë“œ ì •ìƒ ì‘ë™
- ì‹¤ì‹œê°„ ë°ì´í„° ë™ê¸°í™” ì„±ê³µ
- ë³µì¡í•œ ì›Œí¬í”Œë¡œìš° ì²˜ë¦¬ ê°€ëŠ¥

### ğŸš€ í”„ë¡œë•ì…˜ ì¤€ë¹„ ì™„ë£Œ
- ì„±ëŠ¥, ë³´ì•ˆ, ì•ˆì •ì„± ëª¨ë“  ì¸¡ë©´ ê²€ì¦
- í™•ì¥ ê°€ëŠ¥í•œ ì•„í‚¤í…ì²˜ êµ¬í˜„
- ì™„ì „í•œ ë¬¸ì„œí™” ë° ê°€ì´ë“œ ì œê³µ

---

**í…ŒìŠ¤íŠ¸ ì™„ë£Œì¼**: 2025ë…„ 7ì›” 7ì¼  
**í…ŒìŠ¤íŠ¸ í™˜ê²½**: PostgreSQL 15.8.1.095 + n8n v1.100.1  
**ê²°ê³¼**: ğŸ¯ **ì™„ì „ ì„±ê³µ** - ëª¨ë“  ê¸°ëŠ¥ ì •ìƒ ì‘ë™ 